{{ define "data" }}
  {
    "pages": [
      {{ range $i, $val := .Paginator.Pages }}
        {{ if ne $i 0 }},{{ end }}
        {{ if gt (len .Pages) 0 }}
          {
            "url": {{ jsonify .Permalink }},
            "title": {{ jsonify .Title }},
            "pages": {{ len .Pages }}
          }
        {{ else }}
          {
            "url": {{ jsonify .Permalink }},
            "title": {{ jsonify .Title }},
            "publishdate": {{ jsonify .PublishDate }},
            "date": {{ jsonify .Date }},
            "description": {{ jsonify .Description }},
            "tags": {{ jsonify .Params.tags }}
          }
        {{ end }}
      {{ end }}
    ],
    {{ $prefix := printf "%spage/" .Permalink }}
    "pagination": {
      "prefix": "{{ $prefix }}",
      "first": "{{ with .Paginator.First }}{{ $prefix }}{{ .PageNumber }}{{ end }}",
      "prev": "{{ with .Paginator.Prev }}{{ $prefix }}{{ .PageNumber }}{{ end }}",
      "next": "{{ with .Paginator.Next }}{{ $prefix }}{{ .PageNumber }}{{ end }}",
      "last": "{{ with .Paginator.Last }}{{ $prefix }}{{ .PageNumber }}{{ end }}"
    }
  }
{{ end }}

